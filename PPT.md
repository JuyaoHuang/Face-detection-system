## 介绍内容

### 项目简介

人脸识别门禁。

需求分析、目标。

技术栈：fastAPI + Retinaface + Mobileface

### 系统架构

代码树、数据流、分层架构

数据流：

- 后台线程：帧差法（第 N 帧和第 N-9 帧）比对，检测两帧图像是否有较大的变化。如果变化超过一定阈值，认为有人脸，将当前帧送入人脸识别模块，计算得到512维度的特征向量，和特征数据库比对，比对成功则解锁，失败则提示失败。

- 管理员线程：用户连接门锁的热点，在浏览器登录开发板，进入管理员页面控制开发板。操作包括：一键解锁、人脸录入、管理录入人脸、修改密码。

  有两个抢占行为：进行人脸录入时会和后台线程抢占摄像头资源，一键解锁时会抢占门锁的控制权，进行解锁

### 后端实现

因为前面讲了两条数据流，因此此处

### 人脸识别模型

#### **1. 模型介绍**

介绍模型的来源和选择依据。

#### **2. 模型训练与转换**

给出训练的仓库链接，介绍模型的训练效果（Tensorboard 保存的训练曲线），以及两个转换脚本。

#### **3. 效果评估**

执行脚本`python test_similarity.py --dir imgs/ --pattern "*.jpg"` 进行相似度测评

```bash
  Success rate:  4/4
  Avg time:      122.96 ms
  Min time:      117.35 ms
  Max time:      153.69 ms
======================================================================
  步骤 2: 计算相似度矩阵
======================================================================

Computing 4x4 similarity matrix...
  1.jpg vs 2.jpg: 0.3329 (0.0942 ms)
  1.jpg vs 3.jpg: 0.3085 (0.0832 ms)
  1.jpg vs 4.jpg: 0.7624 (0.0803 ms)
  2.jpg vs 3.jpg: 0.5840 (0.3815 ms)
  2.jpg vs 4.jpg: 0.2790 (0.0806 ms)
  3.jpg vs 4.jpg: 0.2376 (0.0739 ms)

📊 Comparison Statistics:
  Total comparisons: 6
  Avg time:          0.1323 ms
```

贴出相似度矩阵：

"D:\Learing_Resourses\大三上\智能信息系统\project\face_app\similarity_test_output/similarity_matrix_20251225_151149.png"

#### **4.离线推理**

贴出运行`python backend/start_server.py` 时，显示的比对记录。（提前存入人脸）

### 集成测试结果

**贴出操作视频**



